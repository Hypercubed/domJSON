!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.domJSON=e()}}(function(){return function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[a]={exports:{}};t[a][0].call(f.exports,function(e){var r=t[a][1][e];return o(r?r:e)},f,f.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t){var r={},n={href:window.location.href||null,userAgent:window.navigator&&window.navigator.userAgent?window.navigator.userAgent:null,version:"0.1.2"},o={absolutePaths:["action","data","href","src"],attributes:!0,computedStyle:!1,cull:!0,deep:!0,domProperties:!0,filter:!1,htmlOnly:!1,metadata:!0,serialProperties:!1,stringify:!1},i={noMeta:!1},a=["link","script"],s=["nodeType","nodeValue","tagName"],u=["attributes","childNodes","children","classList","dataset","style"],l=["innerHTML","innerText","outerHTML","outerText","prefix","text","textContent","wholeText"],f=function(e){if(!arguments.length)return arguments[0]||{};for(var t in arguments[1])e[t]=arguments[1][t];if(arguments.length>2){var r=[e].concat(Array.prototype.slice.call(arguments,2));return f.apply(null,r)}return e},c=function(){if(!arguments.length)return[];for(var e=Array.prototype.concat.apply([],arguments),t=0;t<e.length;t++)e.indexOf(e[t])<t&&(e.splice(t,1),t--);return e},d=function(e){if(e instanceof Array)return e.slice();var t={};for(var r in e)t[r]=e[r];return t},p=function(e,t){var r;if(e instanceof Array)r=c(e.filter(function(e){return t.indexOf(e)>-1}));else{r={};for(var n in t)e.hasOwnProperty(t[n])&&(r[t[n]]=e[t[n]])}return r},y=function(e,t){var r;if(e instanceof Array)r=c(e.filter(function(e){return-1===t.indexOf(e)}));else{r={};for(var n in e)r[n]=e[n];for(var o in t)r.hasOwnProperty(t[o])&&delete r[t[o]]}return r},g=function(e,t){return t===!1?e instanceof Array?[]:{}:t instanceof Array&&t.length?"boolean"==typeof t[0]?1==t.length&&"boolean"==typeof t[0]?t[0]===!0?d(e):e instanceof Array?[]:{}:t[0]===!0?y(e,t.slice(1)):p(e,t.slice(1)):p(e,t):d(e)},m=function(e){var t;return"boolean"==typeof e?e:"object"==typeof e&&null!==e?e instanceof Array?e.filter(function(e,t){return"string"==typeof e||0===t&&e===!0?!0:!1}):e.values instanceof Array?(t=e.values.filter(function(e){return"string"==typeof e?!0:!1}),t.length?(e.exclude&&t.unshift(e.exclude),t):!1):!1:e?!0:!1},h=function(e,t){var r,n,o;if(e.match(/(?:^data\:|^[\w\-\+\.]*?\:\/\/|^\/\/)/i))return e;if("/"===e.charAt(0))return t+e.substr(1);r=t.indexOf("://")>-1?t.substring(0,t.indexOf("://")+3):"",n=(r.length?t.substring(r.length):t).split("/"),o=e.split("/"),n.pop();for(var i=0;i<o.length;i++)"."!=o[i]&&(".."==o[i]?n.length>1&&n.pop():n.push(o[i]));return r+n.join("/")},v=function(e,t){var r={};for(var n in e)"undefined"!=typeof e[n]&&"function"!=typeof e[n]&&n.charAt(0).toLowerCase()===n.charAt(0)&&("object"!=typeof e[n]||e[n]instanceof Array)&&(t.cull?(e[n]||0===e[n]||e[n]===!1)&&(r[n]=e[n]):r[n]=e[n]);return r=g(r,t.domProperties)},w=function(e,t){for(var r,n={},o=e.attributes,i=o.length,a=0;i>a;a++)n[o[a].name]=o[a].value;n=t.attributes?g(n,t.attributes):null,r=g(n,t.absolutePaths);for(var a in r)n[a]=h(r[a],t.absoluteBase);return n},b=function(e,t){var r,n={};if(!(t.computedStyle&&e.style instanceof CSSStyleDeclaration))return null;r=window.getComputedStyle(e);for(var o in r)"cssText"!==o&&!o.match(/\d/)&&"string"==typeof r[o]&&r[o].length&&(n[o]=r[o]);return t.computedStyle instanceof Array?g(n,t.computedStyle):n},P=function(e,t,r){var n,o,i,s,u,l=v(e,t);if(1===e.nodeType){for(var f in a)if(e.tagName.toLowerCase()===a[f])return null}else if(3===e.nodeType&&!e.nodeValue.trim())return null;if(t.attributes&&e.attributes&&(l.attributes=w(e,t)),t.computedStyle&&(n=b(e,t))&&(l.style=n),t.deep===!0||"number"==typeof t.deep&&t.deep>r){u=[],o=t.htmlOnly?e.children:e.childNodes,i=o.length;for(var c=0;i>c;c++)s=P(o[c],t,r+1),s&&u.push(s);l.childNodes=u}return l};r.toJSON=function(e,t){var r,i={},a={},d=(new Date).getTime(),g=s.slice(),h=u.slice();return i=f({},o,t),i.absolutePaths=m(i.absolutePaths),i.attributes=m(i.attributes),i.computedStyle=m(i.computedStyle),i.domProperties=m(i.domProperties),i.serialProperties=m(i.serialProperties),i.absoluteBase=window.location.origin+"/",i.serialProperties!==!0&&(h=h.concat(i.serialProperties instanceof Array&&i.serialProperties.length?i.serialProperties[0]===!0?y(l,i.serialProperties):p(l,i.serialProperties):l)),i.domProperties=i.domProperties instanceof Array?i.domProperties[0]===!0?y(c(i.domProperties,h),g):y(c(i.domProperties,g),h):i.domProperties===!1?g:[!0].concat(h),r=P(e,i,0),i.metadata?(a.meta=f({},n,{clock:(new Date).getTime()-d,date:(new Date).toISOString(),dimensions:{inner:{x:window.innerWidth,y:window.innerHeight},outer:{x:window.outerWidth,y:window.outerHeight}},options:i}),a.node=r):a=r,i.stringify?JSON.stringify(a):a};var x=function(e,t,r){switch(t instanceof DocumentFragment&&(t=t.ownerDocument),e){case 1:return"string"==typeof r.tagName?t.createElement(r.tagName):!1;case 3:return t.createTextNode("string"==typeof r.nodeValue&&r.nodeValue.length?r.nodeValue:"");case 7:return r.hasOwnProperty("target")&&r.hasOwnProperty("data")?t.createProcessingInstruction(r.target,r.data):!1;case 8:return t.createComment("string"==typeof r.nodeValue?r.nodeValue:"");case 9:return t.implementation.createHTMLDocument(r);case 11:return t;default:return!1}},A=function(e,t,r){if(!e.nodeType)return!1;var n=x(e.nodeType,r,e);t.appendChild(n);for(var o in e)if("object"!=typeof e[o]&&"isContentEditable"!==o&&"childNodes"!==o)try{n[o]=e[o]}catch(i){continue}if(1===e.nodeType&&e.tagName&&e.attributes)for(var a in e.attributes)n.setAttribute(a,e.attributes[a]);if(e.childNodes&&e.childNodes.length)for(var s in e.childNodes)A(e.childNodes[s],n,r)};r.toDOM=function(e,t){var r,n;return"string"==typeof e&&(e=JSON.parse(e)),r=f({},i,t),n=document.createDocumentFragment(),r.noMeta?A(e,n,n):A(e.node,n,n),n},t.exports=r},{}]},{},[1])(1)});